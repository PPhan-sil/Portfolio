<!DOCTYPE html><html lang="en"><head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/Portfolio/favicon.svg"><meta name="generator" content="Astro v3.0.12"><!-- Canonical URL --><link rel="canonical" href="https://pphan-sil.github.io/Portfolio/works/rice2/"><!-- Primary Meta Tags --><title>Linux Rice V2.5: ags + AI</title><meta name="title" content="Linux Rice V2.5: ags + AI"><meta name="description" content="Custom Linux Desktop Setup (2024 update)"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://pphan-sil.github.io/Portfolio/works/rice2/"><meta property="og:title" content="Linux Rice V2.5: ags + AI"><meta property="og:description" content="Custom Linux Desktop Setup (2024 update)"><meta property="og:image" content="https://pphan-sil.github.io/blog-placeholder-1.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://pphan-sil.github.io/Portfolio/works/rice2/"><meta property="twitter:title" content="Linux Rice V2.5: ags + AI"><meta property="twitter:description" content="Custom Linux Desktop Setup (2024 update)"><meta property="twitter:image" content="https://pphan-sil.github.io/blog-placeholder-1.jpg"><link rel="stylesheet" href="/Portfolio/_astro/index.89768d65.css" />
<style type="text/css">@import"https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@300;500;700&display=swap";@import"https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap";body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;overflow-wrap:break-word}.video{aspect-ratio:16 / 9;width:100%}.prose :where(ul>li):not(:where([class~=not-prose] *))::marker{color:#3f3f46}.dark .prose :where(ul>li):not(:where([class~=not-prose] *))::marker{color:#fff}img[alt=pc]{width:80%}.hamburger{padding-right:20px;cursor:pointer}.hamburger .line{display:block;width:40px;height:5px;margin-bottom:10px;background-color:#ff9776}.hamburger{display:none}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{background:#fff7ed}::-webkit-scrollbar-thumb{background:#a1a1aa;border-radius:5px}::-webkit-scrollbar-thumb:hover{background:#71717a}.dark ::-webkit-scrollbar-track{background:#18181b;border-radius:5px}.dark ::-webkit-scrollbar-thumb{background:#3f3f46;border-radius:5px}.dark ::-webkit-scrollbar-thumb:hover{background:#71717a}a[data-astro-cid-eimmu3lg]{display:inline-block;text-decoration:none}a[data-astro-cid-eimmu3lg].active{font-weight:bolder;text-decoration:underline}
</style><script type="module">const e=document.getElementById("dropdown-button"),t=document.getElementById("dropdown-menu"),s=document.getElementById("dropdownChevron");function o(){t.style.display==="none"||t.style.display===""?(t.style.display="block",setTimeout(()=>{t.classList.remove("opacity-0")},1),e.setAttribute("aria-expanded","true"),s.classList.add("-scale-y-100","pt-[2px]")):(t.classList.add("opacity-0"),s.classList.remove("-scale-y-100","pt-[2px]"),setTimeout(()=>{t.style.display="none"},300),e.setAttribute("aria-expanded","false"))}e.addEventListener("click",o);document.addEventListener("click",function(n){!e.contains(n.target)&&!t.contains(n.target)&&(t.classList.add("opacity-0"),s.classList.remove("-scale-y-100","pt-[2px]"),setTimeout(()=>{t.style.display="none"},300),e.setAttribute("aria-expanded","false"))});
</script></head><body class="bg-zinc-50 dark:bg-zinc-900 text-zinc-900 dark:text-zinc-300 break-words leading-6 transition-colors duration-300"><header class="fixed w-full p-1 z-20 backdrop-blur-sm backdrop-brightness-75 bg-zinc-50/50 dark:bg-zinc-900/50"><div class="mx-auto max-w-4xl"><nav class="flex items-center justify-between gap-3 font-nunito text-lg tracking-tighter"><a href="/Portfolio"><h2 class="p-2 flex items-center gap-1">Peter Phan</h2></a><div class="md:flex p-2"><ul class="flex items-center gap-5"><li class=""><div class="relative inline-block text-left"><button id="dropdown-button" type="button" class="tracking-tighter" aria-haspopup="true" aria-expanded="false"><span class="mr-0 hover:opacity-75">
Works
</span><svg viewBox="0 0 24 24" id="dropdownChevron" class="w-4 inline duration-150" astro-icon="mdi:chevron-down"><path fill="currentColor" d="M7.41 8.58 12 13.17l4.59-4.59L18 10l-6 6-6-6 1.41-1.42z"/></svg></button><ul id="dropdown-menu" class="absolute z-10 mt-2 w-44 rounded-md bord:rborder-zinc-400 dark:border-zinc-700 bg-zinc-50 dark:bg-zinc-800 shadow-xl ring-1 ring-black ring-opacity-5 focus:outline-none divide-zinc-400 dark:divide-zinc-700 transition-opacity duration-150 ease-in-out opacity-0"><li class="block px-4 py-2 text-sm dark:hover:bg-zinc-700 hover:bg-zinc-200 rounded-md"><a class="" href="/Portfolio/works/offlineirl/">Generative Models &amp; Games for Offline IRL</a></li><li class="block px-4 py-2 text-sm dark:hover:bg-zinc-700 hover:bg-zinc-200 rounded-md"><a class="" href="/Portfolio/works/gradreg/">Staying Consistent with GradCAM</a></li><li class="block px-4 py-2 text-sm dark:hover:bg-zinc-700 hover:bg-zinc-200 rounded-md"><a class="" href="/Portfolio/works/rice2/">Linux Rice V2.5: ags + AI</a></li><li class="block px-4 py-2 text-sm dark:hover:bg-zinc-700 hover:bg-zinc-200 rounded-md"><a class="" href="/Portfolio/works/poker/">Quality Diversity for Texas Hold&#39;Em</a></li><li class="block px-4 py-2 text-sm dark:hover:bg-zinc-700 hover:bg-zinc-200 rounded-md"><a class="" href="/Portfolio/works/graphpdf/">GraphPDF</a></li><li class="block px-4 py-2 text-sm dark:hover:bg-zinc-700 hover:bg-zinc-200 rounded-md"><a class="" href="/Portfolio/works/emojibot/">Emoji Doodler</a></li><li class="block px-4 py-2 text-sm dark:hover:bg-zinc-700 hover:bg-zinc-200 rounded-md"><a class="" href="/Portfolio/works/rice/">Linux Rice V2: Hyprland</a></li><li class="block px-4 py-2 text-sm dark:hover:bg-zinc-700 hover:bg-zinc-200 rounded-md"><a class="" href="/Portfolio/works/kanvaswire/">KanvasWire</a></li><li class="block px-4 py-2 text-sm dark:hover:bg-zinc-700 hover:bg-zinc-200 rounded-md"><a class="" href="/Portfolio/works/nvim/">Neovim Config</a></li><li class="block px-4 py-2 text-sm dark:hover:bg-zinc-700 hover:bg-zinc-200 rounded-md"><a class="" href="/Portfolio/works/blackhole/">Black Hole Kicks</a></li></ul></div></li><li class="hover:opacity-75"><a href="/Portfolio/tech" data-astro-cid-eimmu3lg>Tech</a></li><li class="hover:opacity-75"><a href="https://github.com/PPhan-sil" class="flex items-center gap-1" aria-label="GitHub" data-astro-cid-eimmu3lg><svg viewBox="0 0 24 24" class="w-5 pb-1 inline" astro-icon="mdi:github"><path fill="currentColor" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2z"/></svg></a></li><li class="hover:opacity-75"><div id="themeToggle"><svg viewBox="0 0 24 24" class="sun w-5 block dark:hidden" astro-icon="ic:outline-light-mode"><path fill="currentColor" d="M12 9c1.65 0 3 1.35 3 3s-1.35 3-3 3-3-1.35-3-3 1.35-3 3-3m0-2c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"/></svg><svg viewBox="0 0 24 24" class="moon w-5 hidden dark:block" astro-icon="ic:outline-dark-mode"><path fill="currentColor" d="M9.37 5.51A7.35 7.35 0 0 0 9.1 7.5c0 4.08 3.32 7.4 7.4 7.4.68 0 1.35-.09 1.99-.27A7.014 7.014 0 0 1 12 19c-3.86 0-7-3.14-7-7 0-2.93 1.81-5.45 4.37-6.49zM12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"/></svg></div></li></ul></div></nav></div><script>
    const theme = (() => {
      if (
        typeof localStorage !== "undefined" &&
        localStorage.getItem("theme")
      ) {
        return localStorage.getItem("theme");
      }
      if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
        return "dark";
      }
      return "light";
    })();

    if (theme === "light") {
      document.documentElement.classList.remove("dark");
    } else {
      document.documentElement.classList.add("dark");
    }

    window.localStorage.setItem("theme", theme);

    const handleToggleClick = () => {
      const element = document.documentElement;
      element.classList.toggle("dark");

      const isDark = element.classList.contains("dark");
      localStorage.setItem("theme", isDark ? "dark" : "light");
    };

    document
      .getElementById("themeToggle")
      .addEventListener("click", handleToggleClick);
  </script></header><main class="md:pt-[56px] pt-[56px] mx-auto max-w-4xl md:p-8 p-2"><article class="prose prose-lg dark:prose-invert max-w-none prose-headings:font-nunito
      prose-p:text-lg prose-p:my-2 prose-h1:text-4xl prose-h2:2xl prose-h3:xl prose-h4:lg
      prose-headings:my-2 prose-img:rounded-xl prose-img:border-2 prose-img:border-slate-300
      prose-img:block prose-img:mx-auto prose-img:my-0 dark:prose-img:border-zinc-700
      prose-video:rounded-xl prose-video:border-2 prose-video:border-slate-300 prose-video:block
      prose-video:mx-auto prose-video:my-0 dark:prose-video:border-zinc-700 prose-a:no-underline
      hover:prose-a:underline underline-offset-2 dark:prose-a:text-fuchsia-300
      prose-a:text-blue-500 prose-pre:leading-tight prose-pre:font-mono prose-li:my-0 prose-ul:my-0"><div class="mb-8 rounded-xl overflow-hidden"><img src="/Portfolio/_astro/thumbnail.cd3761fb_2bRuoW.webp" class="object-cover w-fit" alt="" width="1920" height="1080" loading="lazy" decoding="async"></div><h1 class="text-3xl my-1 font-mplus">Linux Rice V2.5: ags + AI</h1><div>Custom Linux Desktop Setup (2024 update)</div><hr class="border-top border-zinc-400 my-4"><h2 id="introduction">Introduction</h2>
<p>This rice is a continuation of my Wayland + Hyprland rice from <a href="/Portfolio/works/rice/">2023</a>. All my Hyprland and application based configurations remained the same. The only biggest change was replacing EWW with Ags and some AI applications. In addition to a LLM assistant, I also have scripts for live translations in my terminal using <a href="https://github.com/openai/whisper">OpenAI’s Whisper</a>, and image generation with <a href="https://github.com/AUTOMATIC1111/stable-diffusion-webui">AUTOMATIC1111’s Stable Diffusion web UI</a>.</p>
<h2 id="aylurs-gtk-shell-ags">Aylur’s GTK Shell (ags)</h2>
<p><a href="https://github.com/Aylur/ags">Aylur’s GTK Shell</a> is a library inspired by EWW for building GTK widgets with GNOME Javascript. Ags offers a much more comfortable developing experience than EWW due to its familiar language and better debugging features. I also found responsiveness and memory to be more efficient with ags. The only gripes I have with ags are the same issues that plagues every Javascript/Typescript developer. Nonetheless, its integration with Hyprland and Wayland has made it a treat to create large scale widgets with.</p>
<video autoplay loop>
  <source src="/Portfolio/rice2/ags.webm" type="video/webm">
</video>
<h3 id="bar">Bar</h3>
<p>The bar is basically a recreation of my EWW bar from my previous rice. Only styling and a few interactions were changed from the previous bar. From left to right the full feature list of the bar are as follows:</p>
<ul>
<li>Workspace</li>
<li>Music Player</li>
<li>Date and Weather</li>
<li>Tray</li>
<li>Useful buttons
<ul>
<li>Color picker</li>
<li>Screenshot tool</li>
<li>Wallpaper changer</li>
</ul>
</li>
<li>Notifications</li>
<li>Updates</li>
<li>Volume</li>
<li>Bluetooth</li>
<li>Internet connection</li>
<li>Time</li>
</ul>
<h3 id="panels">Panels</h3>
<p>The left panel from last years EWW config was overhauled over to ags. The left panel now holds the newly added AI assistant and quick access to some miscellaneous but useful scripts. A right panel was added which contains quick system toggles, notifications, volume mixer, bluetooth and internet lists, appearance settings, a calendar, and TODO list.</p>
<h2 id="local-ai-assistant">Local AI Assistant</h2>
<p>In the left panel is a chat interface frontend for interacting with an <a href="https://ollama.com/">Ollama</a>. Ollama acts as a user friendly interface to <a href="https://github.com/ggerganov/llama.cpp">llama.cpp</a> for inferences LLMs. This allows me to locally run my own LLMs without being dependent on 3rd party APIs. With my <a href="/Portfolio/tech/pc/">hardware</a> I can comfortably run 7-8b parameter models along my normal GPU use. Multiple chat conversations can be created and deleted. Chats are encrypted and stored and fetched from a sqlite database. Chat titles are automatically generated with a templated prompt. The model’s settings, such as temperature, can be adjusted in a settings panel. Currently model selection is handled within a user configuration file. The main models I jump between are <del><a href="https://ollama.com/library/llama3">llama3 8b</a></del> <a href="https://ollama.com/library/llama3.1">llama3.1 8b</a>, <a href="https://ollama.com/library/codellama">codellama 7b</a>, and <a href="https://ollama.com/library/dolphin-mistral">dolphin-mistral 7b</a>.</p>
<p>A chat conversation is rendered in markdown. This includes different typography, color syntax, codeblocks, and latex blocks. Codeblocks also render with a copy button to quickly copy its content to the system clipboard. The chat also features the same tools many LLM web services provide. This includes deleting the last messages sent and regenerating a message. In the backend, there are some prompts prepended to each conversation to help the model be more useful as a desktop assistant.</p>













<table><thead><tr><th align="center">Chat List</th><th align="center">Chat with Markdown Test Example</th></tr></thead><tbody><tr><td align="center"><img alt="results"  src="/Portfolio/_astro/chat.a8c8008b_Z2lufNq.webp" width="449" height="1040" loading="lazy" decoding="async"></td><td align="center"><img alt="results"  src="/Portfolio/_astro/test.715553e7_Z1MbvUp.webp" width="453" height="1037" loading="lazy" decoding="async"></td></tr></tbody></table></article></main><footer class="text-zinc-500 p-4 text-center">
&copy; 2024<a href="/Portfolio/"> Peter Phan</a>. All rights reserved.
</footer></body></html>